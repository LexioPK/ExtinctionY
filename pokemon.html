<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pokémon Info - Extinction Y</title>

<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;600&display=swap" rel="stylesheet">

<style>
    body {
        font-family: "Lexend", sans-serif;
        background: #f0f0f0;
        margin: 0;
        padding: 20px;
    }

    .tabs {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 25px;
        position: sticky;
        top: 0;
        background: #f0f0f0;
        padding: 10px 0;
        z-index: 20;
    }

    .tab {
        font-size: 1.1em;
        padding: 10px 18px;
        background: #ffffff;
        border-radius: 10px;
        text-decoration: none;
        color: black;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    .tab:hover { background: #e4e4e4; }
    .active { background: #d0ffd6; font-weight: bold; }

    h1 {
        text-align: center;
        position: sticky;
        top: 65px;
        margin-bottom: 20px;
        background: #f0f0f0;
        padding: 10px 0;
        z-index: 19;
    }

    /* Move Tables Side by Side */
    .move-sections {
        display: flex;
        gap: 20px;
        justify-content: center;
        align-items: flex-start;
        margin-top: 20px;
    }

    .move-table {
        width: 48%;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        overflow: hidden;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        background: #fff;
    }

    th, td {
        text-align: left;
        padding: 8px 10px;
        border-bottom: 1px solid #ddd;
        font-size: 0.85em;
    }

    th {
        background: #f5f5f5;
        font-weight: 600;
    }

    .type {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 10px;
        color: #fff;
        font-size: 0.8em;
    }

    .type-normal { background:#9099a1; }
    .type-fire { background:#ff9c54; }
    .type-water { background:#4f90d9; }
    .type-grass { background:#63bb5b; }
    .type-electric { background:#f3d23b; }
    .type-ice { background:#74cec0; }
    .type-fighting { background:#ce4069; }
    .type-poison { background:#aa5caf; }
    .type-ground { background:#d97746; }
    .type-flying { background:#92aade; }
    .type-psychic { background:#f97176; }
    .type-bug { background:#90c12c; }
    .type-rock { background:#c7b78b; }
    .type-ghost { background:#5269ac; }
    .type-dark { background:#5a5366; }
    .type-dragon { background:#096dc4; }
    .type-steel { background:#5a8ea2; }
    .type-fairy { background:#ec8fe6; }

    .category-icon {
        width: 28px;
        height: 28px;
        display: block;
        margin: auto;
    }
</style>
</head>
<body>

<!-- Tabs -->
<div class="tabs">
    <a class="tab" href="index.html">Pokédex</a>
    <a class="tab" href="moves.html">Moves</a>
    <a class="tab" href="trainers.html">Trainers</a>
</div>

<h1 id="pokemon-name">Loading…</h1>

<div id="pokemon-info"></div>

<h2 style="text-align:center; margin-top:40px;">Moves</h2>

<!-- SIDE-BY-SIDE MOVE TABLES -->
<div class="move-sections">

    <!-- LEVEL-UP MOVES -->
    <div class="move-table">
        <table id="level-moves">
            <thead>
                <tr>
                    <th>Lvl</th>
                    <th>Move</th>
                    <th>Type</th>
                    <th>Cat</th>
                    <th>Pow</th>
                    <th>Acc</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- TM / HM / TUTOR MOVES -->
    <div class="move-table">
        <table id="tm-moves">
            <thead>
                <tr>
                    <th>TM</th>
                    <th>Move</th>
                    <th>Type</th>
                    <th>Cat</th>
                    <th>Pow</th>
                    <th>Acc</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

</div>

<script>
const urlParams = new URLSearchParams(window.location.search);
const pokemonName = urlParams.get("name");

document.getElementById("pokemon-name").textContent = pokemonName ?? "Missing Pokémon";

function loadPokemon() {
    fetch("data/pokemon.json")
        .then(r => r.json())
        .then(data => {
            const mon = data[pokemonName];
            if (!mon) return;

            document.getElementById("pokemon-info").innerHTML = ""; // unchanged

            fillMoveTables(mon);
        });
}

function fillMoveTables(mon) {
    fetch("data/moves.json")
        .then(r => r.json())
        .then(allMoves => {

            const lvlBody = document.querySelector("#level-moves tbody");
            const tmBody = document.querySelector("#tm-moves tbody");

            // LEVEL-UP MOVE TABLE
            mon.Learnset.LevelUp.forEach(m => {
                const mv = allMoves[m.Move];
                lvlBody.innerHTML += `
                    <tr>
                        <td>${m.Level}</td>
                        <td>${m.Move}</td>
                        <td><span class="type type-${mv.Type.toLowerCase()}">${mv.Type}</span></td>
                        <td><img class="category-icon" src="images/${mv.Category.toLowerCase()}.png"></td>
                        <td>${mv.Power ?? "—"}</td>
                        <td>${mv.Acc ?? "—"}%</td>
                    </tr>`;
            });

            // TM / TUTOR MOVE TABLE
            mon.Learnset.TMs.forEach(m => {
                const mv = allMoves[m.Move];
                tmBody.innerHTML += `
                    <tr>
                        <td>${m.TM}</td>
                        <td>${m.Move}</td>
                        <td><span class="type type-${mv.Type.toLowerCase()}">${mv.Type}</span></td>
                        <td><img class="category-icon" src="images/${mv.Category.toLowerCase()}.png"></td>
                        <td>${mv.Power ?? "—"}</td>
                        <td>${mv.Acc ?? "—"}%</td>
                    </tr>`;
            });
        });
}

loadPokemon();
</script>

</body>
</html>
