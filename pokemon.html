<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pokémon Details</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
    }

    h1 {
        text-align: center;
    }

    .pokemon-image {
        display: block;
        margin: 0 auto 20px auto;
        width: 200px;
    }

    .section {
        margin-top: 40px;
        border-top: 2px solid #333;
        padding-top: 20px;
    }

    .section h2 {
        margin-bottom: 20px;
        font-size: 26px;
        border-bottom: 1px solid #ccc;
        padding-bottom: 10px;
    }

    .info-subheadings {
        display: flex;
        justify-content: space-between;
        font-weight: bold;
        margin-bottom: 10px;
        font-size: 18px;
    }

    .info-block {
        margin-bottom: 20px;
    }

    .nav-buttons {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        font-size: 18px;
    }

    .nav-buttons a {
        text-decoration: none;
        color: blue;
        font-weight: bold;
    }

    .moves-container {
        display: flex;
        justify-content: space-between;
        gap: 40px;
    }

    .moves-column {
        width: 48%;
    }
</style>
</head>
<body>

<div class="nav-buttons">
    <a id="prevLink"></a>
    <a id="nextLink"></a>
</div>

<h1 id="pokeName"></h1>
<img id="pokeImg" class="pokemon-image">

<div class="section" id="infoSection">
    <h2>Info</h2>

    <div class="info-subheadings">
        <div>Type</div>
        <div>Abilities</div>
        <div>Additional Info</div>
    </div>

    <div class="info-subheadings" id="infoValues">
        <div id="type"></div>
        <div id="abilities"></div>
        <div id="additional"></div>
    </div>
</div>

<div class="section">
    <h2>Base Stats</h2>
    <div id="stats"></div>
</div>

<div class="section">
    <h2>Evolutions</h2>
    <div id="evolutions"></div>
</div>

<div class="section">
    <h2>Moves</h2>

    <div class="moves-container">
        <div class="moves-column">
            <h3>Level-Up Moves</h3>
            <ul id="levelMoves"></ul>
        </div>

        <div class="moves-column">
            <h3>TMs</h3>
            <ul id="tmMoves"></ul>
        </div>
    </div>
</div>

<script>
async function loadPokemon() {
    const urlParams = new URLSearchParams(window.location.search);
    const id = parseInt(urlParams.get("id"));

    const response = await fetch("pokedex.json");
    const pokedex = await response.json();

    const movesetRes = await fetch("movesets.json");
    const movesets = await movesetRes.json();

    const extraRes = await fetch("additionalInfo.json");
    const additionalInfo = await extraRes.json();

    const p = pokedex[id - 1];

    // Name + Number
    document.getElementById("pokeName").textContent = `#${p.number} ${p.name}`;

    // Image
    document.getElementById("pokeImg").src = p.image;

    // Info section
    document.getElementById("type").textContent = p.type.join(", ");
    document.getElementById("abilities").textContent = p.abilities.join(", ");
    document.getElementById("additional").textContent = additionalInfo[p.name] || "";

    // Stats
    document.getElementById("stats").innerHTML =
        Object.entries(p.stats).map(([k, v]) => `${k}: ${v}`).join("<br>");

    // Evolutions
    document.getElementById("evolutions").textContent =
        p.evolutions ? p.evolutions.join(" → ") : "None";

    // Movesets
    const m = movesets[p.name];
    if (m) {
        document.getElementById("levelMoves").innerHTML =
            m.level.map(move => `<li>${move}</li>`).join("");

        document.getElementById("tmMoves").innerHTML =
            m.tms.map(move => `<li>${move}</li>`).join("");
    }

    // Navigation
    const prev = (id - 2 + pokedex.length) % pokedex.length;
    const next = id % pokedex.length;

    document.getElementById("prevLink").href = `pokemon.html?id=${pokedex[prev].number}`;
    document.getElementById("prevLink").textContent = `← ${pokedex[prev].name}`;

    document.getElementById("nextLink").href = `pokemon.html?id=${pokedex[next].number}`;
    document.getElementById("nextLink").textContent = `${pokedex[next].name} →`;
}

loadPokemon();
</script>

</body>
</html>
